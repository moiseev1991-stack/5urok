{% extends 'batteries/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç–∞—Ä–µ–µ–∫{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 30px;">‚ôªÔ∏è –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤</h1>

<div class="stats-box">
    <h2>{{ total_devices }}</h2>
    <p>—É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å–¥–∞–Ω–æ –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É</p>
</div>

<div style="background-color: #0d1117; border: 1px solid #30363d; padding: 20px; border-radius: 6px; margin-top: 20px;">
    <h2 style="margin-bottom: 15px; color: #f0f6fc;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <p style="font-size: 16px; margin-bottom: 10px;"><strong>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</strong> {{ total_users }}</p>
    <p style="font-size: 16px;"><strong>–í—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:</strong> {{ total_devices }}</p>
</div>

{% if stats_by_type %}
<div style="margin-top: 24px; background-color: #0d1117; border: 1px solid #30363d; padding: 24px; border-radius: 6px;">
    <h2 style="margin-bottom: 20px; color: #f0f6fc;">üì¶ –ü–æ —Ç–∏–ø–∞–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
        {% for device_type, stats in stats_by_type.items %}
        <div style="background-color: #161b22; border: 1px solid #30363d; padding: 16px; border-radius: 6px;">
            <h3 style="color: #58a6ff; margin-bottom: 8px; font-size: 24px;">{{ stats.total }}</h3>
            <p style="color: #8b949e; margin-bottom: 4px;">{{ stats.name }}</p>
            <p style="color: #6e7681; font-size: 12px;">{{ stats.count }} –∑–∞–ø–∏—Å–µ–π</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div style="margin-top: 24px; background-color: #0d1117; border: 1px solid #30363d; padding: 24px; border-radius: 6px;">
    <h2 style="margin-bottom: 20px; color: #f0f6fc;">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px;">
        <div style="background-color: #161b22; border: 1px solid #30363d; padding: 16px; border-radius: 6px; text-align: center;">
            <h3 style="color: #58a6ff; margin-bottom: 8px; font-size: 28px;">{{ total_7_days }}</h3>
            <p style="color: #8b949e;">–ó–∞ 7 –¥–Ω–µ–π</p>
        </div>
        <div style="background-color: #161b22; border: 1px solid #30363d; padding: 16px; border-radius: 6px; text-align: center;">
            <h3 style="color: #58a6ff; margin-bottom: 8px; font-size: 28px;">{{ total_30_days }}</h3>
            <p style="color: #8b949e;">–ó–∞ 30 –¥–Ω–µ–π</p>
        </div>
        <div style="background-color: #161b22; border: 1px solid #30363d; padding: 16px; border-radius: 6px; text-align: center;">
            <h3 style="color: #58a6ff; margin-bottom: 8px; font-size: 28px;">{{ total_90_days }}</h3>
            <p style="color: #8b949e;">–ó–∞ 90 –¥–Ω–µ–π</p>
        </div>
    </div>
    
    {% if stats_30_days %}
    <div style="margin-top: 24px;">
        <h3 style="color: #f0f6fc; margin-bottom: 16px; font-size: 18px;">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –ø–æ —Ç–∏–ø–∞–º:</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px;">
            {% for device_type, stats in stats_30_days.items %}
            <div style="background-color: #161b22; border: 1px solid #30363d; padding: 12px; border-radius: 6px;">
                <p style="color: #58a6ff; font-weight: 600; margin-bottom: 4px;">{{ stats.total }}</p>
                <p style="color: #8b949e; font-size: 14px;">{{ stats.name }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

{% if not user.is_authenticated %}
<div style="margin-top: 24px; text-align: center; padding: 32px; background-color: #0d1117; border: 1px solid #30363d; border-radius: 6px;">
    <h3 style="margin-bottom: 15px; color: #f0f6fc;">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º!</h3>
    <p style="margin-bottom: 20px; color: #8b949e;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤–µ—Å—Ç–∏ —É—á—ë—Ç —Å–≤–æ–∏—Ö —Å–¥–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
    <a href="{% url 'register' %}" class="btn btn-primary" style="margin-right: 10px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    <a href="{% url 'login' %}" class="btn btn-secondary">–í—Ö–æ–¥</a>
</div>
{% else %}
<div style="margin-top: 24px; text-align: center; padding: 32px; background-color: #0d1117; border: 1px solid #30363d; border-radius: 6px;">
    <h3 style="margin-bottom: 15px; color: #f0f6fc;">–ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</h3>
    <p style="margin-bottom: 20px; color: #8b949e;">–î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–¥–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</p>
    <a href="{% url 'submit_batteries' %}" class="btn btn-primary">–°–¥–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</a>
</div>
{% endif %}

<div style="margin-top: 24px; padding: 20px; background-color: #0d1117; border: 1px solid #30363d; border-left: 4px solid #d29922; border-radius: 6px;">
    <h3 style="margin-bottom: 10px; color: #f0f6fc;">üí° –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ —Å–¥–∞–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É?</h3>
    <ul style="color: #c9d1d9; line-height: 1.8; padding-left: 20px;">
        <li>–ë–∞—Ç–∞—Ä–µ–π–∫–∏, –ª–∞–º–ø—ã –∏ power banks —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–∫—Å–∏—á–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—è–∑–Ω—è—é—Ç –ø–æ—á–≤—É –∏ –≤–æ–¥—É</li>
        <li>–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–≤–ª–µ—á—å —Ü–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</li>
        <li>–ö–∞–∂–¥–æ–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ - —ç—Ç–æ —à–∞–≥ –∫ —á–∏—Å—Ç–æ–π –ø–ª–∞–Ω–µ—Ç–µ</li>
    </ul>
</div>
{% endblock %}
