{% extends 'batteries/base.html' %}

{% block title %}–°–¥–∞—Ç—å –±–∞—Ç–∞—Ä–µ–π–∫–∏ - –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç–∞—Ä–µ–µ–∫{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 30px;">üì¶ –°–¥–∞—Ç—å –±–∞—Ç–∞—Ä–µ–π–∫–∏</h1>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 30px;">
    <div style="background-color: #0d1117; border: 1px solid #30363d; padding: 20px; border-radius: 6px; text-align: center;">
        <h3 style="color: #58a6ff; margin-bottom: 10px;">{{ user_total }}</h3>
        <p style="color: #8b949e;">–í–∞—à–∏—Ö –±–∞—Ç–∞—Ä–µ–µ–∫</p>
    </div>
    <div style="background-color: #0d1117; border: 1px solid #30363d; padding: 20px; border-radius: 6px; text-align: center;">
        <h3 style="color: #58a6ff; margin-bottom: 10px;">{{ user_count }}</h3>
        <p style="color: #8b949e;">–í–∞—à–∏—Ö —Å–¥–∞—á</p>
    </div>
</div>

<div style="max-width: 600px; margin: 0 auto;">
    <h2 style="margin-bottom: 20px;">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å–¥–∞—á—É</h2>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.quantity.id_for_label }}">{{ form.quantity.label }}</label>
            {{ form.quantity }}
            {% if form.quantity.errors %}
                <div style="color: #f85149; margin-top: 5px; font-size: 14px;">{{ form.quantity.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.date_submitted.id_for_label }}">{{ form.date_submitted.label }}</label>
            {{ form.date_submitted }}
            {% if form.date_submitted.errors %}
                <div style="color: #f85149; margin-top: 5px; font-size: 14px;">{{ form.date_submitted.errors }}</div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%;">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
</div>

{% if recent_submissions %}
<div style="margin-top: 40px;">
    <h2 style="margin-bottom: 20px;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–∞—á–∏</h2>
    <table>
        <thead>
            <tr>
                <th>–î–∞—Ç–∞ —Å–¥–∞—á–∏</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
            </tr>
        </thead>
        <tbody>
            {% for submission in recent_submissions %}
            <tr>
                <td>{{ submission.date_submitted|date:"d.m.Y H:i" }}</td>
                <td>{{ submission.quantity }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="text-align: center; margin-top: 20px;">
        <a href="{% url 'profile' %}" class="btn btn-secondary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–¥–∞—á–∏</a>
    </div>
</div>
{% endif %}
{% endblock %}
